<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Checkout | Blaze Intelligence</title>
    <meta name="description" content="Secure checkout for Blaze Intelligence championship-level sports analytics packages.">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Stripe JavaScript SDK -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Square Web Payments SDK -->
    <script src="https://web.squarecdn.com/v1/square.js"></script>
    
    <style>
        body { background: #0a0a0a; color: #e2e8f0; font-family: 'Inter', sans-serif; }
        .glass-card { background: rgba(30, 41, 59, 0.9); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .processor-option { transition: all 0.3s ease; cursor: pointer; }
        .processor-option:hover { transform: scale(1.02); }
        .processor-option.active { border: 2px solid #3b82f6; background: rgba(59, 130, 246, 0.1); }
        .checkout-step { display: none; }
        .checkout-step.active { display: block; }
        .progress-step { width: 20px; height: 20px; border-radius: 50%; background: #374151; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; }
        .progress-step.completed { background: #10b981; }
        .progress-step.active { background: #3b82f6; }
        .progress-line { height: 2px; background: #374151; flex: 1; }
        .progress-line.completed { background: #10b981; }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-lg border-b border-slate-800">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="text-2xl font-bold text-cyan-400">BLAZE INTELLIGENCE</a>
                <div class="flex items-center gap-4">
                    <span class="text-sm text-slate-400">Secure Checkout</span>
                    <div class="flex items-center gap-2">
                        <i data-lucide="shield-check" class="w-4 h-4 text-green-400"></i>
                        <span class="text-xs text-green-400">SSL Encrypted</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-24 min-h-screen">
        <div class="max-w-6xl mx-auto px-4 py-8">
            <!-- Progress Indicator -->
            <div class="mb-8">
                <div class="flex items-center justify-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="progress-step active" id="step1-indicator">1</div>
                        <span class="text-sm text-slate-300">Package</span>
                    </div>
                    <div class="progress-line" id="line1"></div>
                    <div class="flex items-center space-x-2">
                        <div class="progress-step" id="step2-indicator">2</div>
                        <span class="text-sm text-slate-300">Payment</span>
                    </div>
                    <div class="progress-line" id="line2"></div>
                    <div class="flex items-center space-x-2">
                        <div class="progress-step" id="step3-indicator">3</div>
                        <span class="text-sm text-slate-300">Complete</span>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Left Column: Checkout Form -->
                <div class="space-y-6">
                    <!-- Step 1: Package Selection -->
                    <div class="checkout-step active" id="step1">
                        <div class="glass-card p-6 rounded-2xl">
                            <h2 class="text-2xl font-bold text-white mb-6">Select Your Package</h2>
                            
                            <div class="space-y-4" id="package-options">
                                <!-- Package options will be populated by JavaScript -->
                            </div>
                            
                            <div class="mt-6">
                                <button onclick="nextStep(2)" 
                                        class="w-full py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:opacity-50"
                                        id="continue-to-payment" 
                                        disabled>
                                    Continue to Payment
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Payment Method Selection -->
                    <div class="checkout-step" id="step2">
                        <div class="glass-card p-6 rounded-2xl">
                            <h2 class="text-2xl font-bold text-white mb-6">Choose Payment Method</h2>
                            
                            <!-- Payment Processor Options -->
                            <div class="grid md:grid-cols-2 gap-4 mb-6">
                                <div class="processor-option glass-card p-4 rounded-lg border border-slate-600" 
                                     onclick="selectProcessor('stripe')" 
                                     id="stripe-option">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center">
                                            <i data-lucide="credit-card" class="w-4 h-4 text-white"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-semibold text-white">Credit Card</h3>
                                            <p class="text-xs text-slate-400">Visa, Mastercard, Amex</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="processor-option glass-card p-4 rounded-lg border border-slate-600" 
                                     onclick="selectProcessor('square')" 
                                     id="square-option">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-green-600 rounded flex items-center justify-center">
                                            <i data-lucide="building-2" class="w-4 h-4 text-white"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-semibold text-white">Bank Transfer</h3>
                                            <p class="text-xs text-slate-400">ACH, Wire, International</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Customer Information Form -->
                            <div class="space-y-4 mb-6">
                                <h3 class="text-lg font-semibold text-white">Contact Information</h3>
                                
                                <div class="grid md:grid-cols-2 gap-4">
                                    <input type="text" 
                                           id="contact-person" 
                                           placeholder="Contact Person *"
                                           class="w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500"
                                           required>
                                    <input type="email" 
                                           id="customer-email" 
                                           placeholder="Email Address *"
                                           class="w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500"
                                           required>
                                </div>
                                
                                <div class="grid md:grid-cols-2 gap-4">
                                    <input type="text" 
                                           id="organization" 
                                           placeholder="Organization/Team *"
                                           class="w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500"
                                           required>
                                    <input type="tel" 
                                           id="phone" 
                                           placeholder="Phone Number"
                                           class="w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500">
                                </div>
                                
                                <select id="sport" 
                                        class="w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500">
                                    <option value="">Select Primary Sport *</option>
                                    <option value="baseball">Baseball</option>
                                    <option value="football">Football</option>
                                    <option value="basketball">Basketball</option>
                                    <option value="multiple">Multiple Sports</option>
                                </select>
                            </div>

                            <!-- Payment Form Container -->
                            <div id="payment-form-container">
                                <!-- Stripe Payment Form -->
                                <div id="stripe-payment-form" class="payment-form hidden">
                                    <h3 class="text-lg font-semibold text-white mb-4">Card Information</h3>
                                    <div id="stripe-card-element" class="p-4 bg-slate-800 border border-slate-600 rounded-lg"></div>
                                    <div id="stripe-card-errors" class="text-red-400 text-sm mt-2 hidden"></div>
                                </div>

                                <!-- Square Payment Form -->
                                <div id="square-payment-form" class="payment-form hidden">
                                    <!-- Square integration will be loaded here -->
                                </div>
                            </div>

                            <div class="flex space-x-4 mt-6">
                                <button onclick="previousStep(1)" 
                                        class="flex-1 py-3 bg-slate-700 text-white font-semibold rounded-lg hover:bg-slate-600">
                                    Back
                                </button>
                                <button onclick="processPayment()" 
                                        class="flex-1 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:opacity-50"
                                        id="process-payment-btn" 
                                        disabled>
                                    Process Payment
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Processing/Complete -->
                    <div class="checkout-step" id="step3">
                        <div class="glass-card p-6 rounded-2xl text-center">
                            <div id="processing-state">
                                <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"></div>
                                <h2 class="text-2xl font-bold text-white mb-4">Processing Your Payment</h2>
                                <p class="text-slate-300">Please do not refresh or close this page...</p>
                            </div>
                            
                            <div id="success-state" class="hidden">
                                <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i data-lucide="check" class="w-8 h-8 text-white"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-white mb-4">Payment Successful!</h2>
                                <p class="text-slate-300 mb-6">Welcome to Blaze Intelligence. You'll receive a confirmation email shortly.</p>
                                <a href="/dashboard.html" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">
                                    Access Dashboard
                                </a>
                            </div>
                            
                            <div id="error-state" class="hidden">
                                <div class="w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i data-lucide="x" class="w-8 h-8 text-white"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-white mb-4">Payment Failed</h2>
                                <p class="text-slate-300 mb-6" id="error-message">There was an issue processing your payment. Please try again.</p>
                                <button onclick="previousStep(2)" 
                                        class="px-6 py-3 bg-orange-600 text-white font-semibold rounded-lg hover:bg-orange-700">
                                    Try Again
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Order Summary -->
                <div class="lg:sticky lg:top-24 lg:h-fit">
                    <div class="glass-card p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-white mb-4">Order Summary</h3>
                        
                        <div id="order-summary">
                            <!-- Order details will be populated by JavaScript -->
                        </div>
                        
                        <!-- Security Badges -->
                        <div class="mt-6 pt-6 border-t border-slate-700">
                            <div class="flex items-center space-x-4 text-sm text-slate-400">
                                <div class="flex items-center space-x-2">
                                    <i data-lucide="shield" class="w-4 h-4 text-green-400"></i>
                                    <span>SSL Secured</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <i data-lucide="lock" class="w-4 h-4 text-green-400"></i>
                                    <span>PCI Compliant</span>
                                </div>
                            </div>
                            
                            <div class="mt-4 text-xs text-slate-500">
                                <p>Your payment information is encrypted and secure. We do not store credit card details.</p>
                            </div>
                        </div>
                        
                        <!-- Contact Support -->
                        <div class="mt-6 pt-6 border-t border-slate-700">
                            <h4 class="font-semibold text-white mb-2">Need Help?</h4>
                            <div class="text-sm text-slate-400 space-y-1">
                                <p>ðŸ“§ ahump20@outlook.com</p>
                                <p>ðŸ“± (210) 273-5538</p>
                                <p>Available: Mon-Fri 9AM-6PM CST</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/js/square-integration.js"></script>
    <script>
        // Global variables
        let stripe = null;
        let stripeElements = null;
        let cardElement = null;
        let blazeSquare = null;
        let selectedPackage = null;
        let selectedProcessor = 'stripe';
        let currentStep = 1;

        // Package configurations
        const packages = {
            starter: {
                id: 'starter',
                name: 'Starter Package',
                description: 'Perfect for high school and youth programs',
                monthlyPrice: 2500,
                annualPrice: 250000,
                stripePriceId: 'price_starter_annual',
                features: ['1 Team Coverage', 'Basic Analytics', '5 User Accounts', 'Email Support']
            },
            professional: {
                id: 'professional',
                name: 'Professional Package', 
                description: 'For college athletics departments',
                monthlyPrice: 10000,
                annualPrice: 1000000,
                stripePriceId: 'price_professional_annual',
                features: ['5 Teams Coverage', 'Advanced Analytics', 'Vision AI Basic', 'API Access', 'Priority Support']
            },
            enterprise: {
                id: 'enterprise',
                name: 'Enterprise Package',
                description: 'For professional teams and organizations',
                monthlyPrice: 41667,
                annualPrice: 5000000,
                stripePriceId: 'price_enterprise_annual',
                features: ['Unlimited Teams', 'Full Platform Access', 'Vision AI Advanced', 'Custom Integrations', 'Dedicated Manager']
            },
            championship: {
                id: 'championship',
                name: 'Championship Package',
                description: 'Elite professional with Vision AI and custom solutions',
                monthlyPrice: 208333,
                annualPrice: 25000000,
                stripePriceId: 'price_championship_annual',
                features: ['All Enterprise Features', 'Vision AI Full', 'Custom ML Models', 'White Label Options', 'On-site Training']
            }
        };

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeCheckout();
            populatePackages();
            updateOrderSummary();
            lucide.createIcons();
        });

        // Initialize payment processors
        async function initializeCheckout() {
            try {
                // Initialize Stripe
                stripe = Stripe('pk_test_51234567890abcdef'); // Replace with actual publishable key
                stripeElements = stripe.elements();
                
                // Initialize Square
                blazeSquare = new BlazeSquareIntegration({
                    applicationId: 'sandbox-sq0idb-your-app-id', // Replace with actual app ID
                    locationId: 'your-location-id', // Replace with actual location ID
                    environment: 'production'
                });

                // Set default processor
                selectProcessor('stripe');
                
            } catch (error) {
                console.error('Checkout initialization failed:', error);
            }
        }

        // Populate package options
        function populatePackages() {
            const container = document.getElementById('package-options');
            const urlParams = new URLSearchParams(window.location.search);
            const preselectedPackage = urlParams.get('package');
            
            Object.values(packages).forEach(pkg => {
                const isPreselected = pkg.id === preselectedPackage;
                const option = document.createElement('div');
                option.className = `package-option cursor-pointer border border-slate-600 rounded-lg p-4 hover:border-blue-400 transition-all ${isPreselected ? 'border-blue-400 bg-blue-400/10' : ''}`;
                option.setAttribute('data-package', pkg.id);
                option.onclick = () => selectPackage(pkg.id);
                
                option.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-white">${pkg.name}</h3>
                            <p class="text-slate-400 text-sm mb-2">${pkg.description}</p>
                            <ul class="text-xs text-slate-300 space-y-1">
                                ${pkg.features.slice(0, 3).map(feature => `<li>â€¢ ${feature}</li>`).join('')}
                                ${pkg.features.length > 3 ? `<li class="text-slate-500">+${pkg.features.length - 3} more features</li>` : ''}
                            </ul>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-white">$${(pkg.annualPrice / 100).toLocaleString()}</div>
                            <div class="text-sm text-slate-400">/year</div>
                            <div class="text-xs text-green-400 mt-1">Save ${(((pkg.monthlyPrice * 12) - pkg.annualPrice) / 100).toLocaleString()}</div>
                        </div>
                    </div>
                `;
                
                container.appendChild(option);
                
                if (isPreselected) {
                    selectPackage(pkg.id);
                }
            });
        }

        // Select package
        function selectPackage(packageId) {
            selectedPackage = packages[packageId];
            
            // Update UI
            document.querySelectorAll('.package-option').forEach(option => {
                option.classList.remove('border-blue-400', 'bg-blue-400/10');
            });
            
            document.querySelector(`[data-package="${packageId}"]`).classList.add('border-blue-400', 'bg-blue-400/10');
            
            // Enable continue button
            document.getElementById('continue-to-payment').disabled = false;
            
            // Update order summary
            updateOrderSummary();
        }

        // Select payment processor
        function selectProcessor(processor) {
            selectedProcessor = processor;
            
            // Update UI
            document.querySelectorAll('.processor-option').forEach(option => {
                option.classList.remove('active');
            });
            document.getElementById(`${processor}-option`).classList.add('active');
            
            // Show/hide payment forms
            document.querySelectorAll('.payment-form').forEach(form => {
                form.classList.add('hidden');
            });
            
            if (processor === 'stripe') {
                setupStripeForm();
            } else if (processor === 'square') {
                setupSquareForm();
            }
            
            // Enable payment button if form is valid
            validatePaymentForm();
        }

        // Setup Stripe payment form
        function setupStripeForm() {
            const form = document.getElementById('stripe-payment-form');
            form.classList.remove('hidden');
            
            // Create card element if not exists
            if (!cardElement) {
                cardElement = stripeElements.create('card', {
                    style: {
                        base: {
                            fontSize: '16px',
                            color: '#e2e8f0',
                            '::placeholder': {
                                color: '#94a3b8',
                            },
                        },
                    },
                });
                
                cardElement.mount('#stripe-card-element');
                
                cardElement.on('change', function(event) {
                    const displayError = document.getElementById('stripe-card-errors');
                    if (event.error) {
                        displayError.textContent = event.error.message;
                        displayError.classList.remove('hidden');
                    } else {
                        displayError.classList.add('hidden');
                    }
                    validatePaymentForm();
                });
            }
        }

        // Setup Square payment form
        function setupSquareForm() {
            const form = document.getElementById('square-payment-form');
            form.classList.remove('hidden');
            
            blazeSquare.createPaymentForm('square-payment-form', selectedPackage);
        }

        // Validate payment form
        function validatePaymentForm() {
            const contactPerson = document.getElementById('contact-person').value;
            const customerEmail = document.getElementById('customer-email').value;
            const organization = document.getElementById('organization').value;
            const sport = document.getElementById('sport').value;
            
            const basicInfoValid = contactPerson && customerEmail && organization && sport;
            
            document.getElementById('process-payment-btn').disabled = !basicInfoValid;
        }

        // Add event listeners for form validation
        ['contact-person', 'customer-email', 'organization', 'sport'].forEach(id => {
            document.getElementById(id).addEventListener('input', validatePaymentForm);
            document.getElementById(id).addEventListener('change', validatePaymentForm);
        });

        // Navigation functions
        function nextStep(step) {
            if (step === 2 && !selectedPackage) {
                alert('Please select a package first.');
                return;
            }
            
            currentStep = step;
            updateStepUI();
        }

        function previousStep(step) {
            currentStep = step;
            updateStepUI();
        }

        // Update step UI
        function updateStepUI() {
            // Hide all steps
            document.querySelectorAll('.checkout-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show current step
            document.getElementById(`step${currentStep}`).classList.add('active');
            
            // Update progress indicators
            for (let i = 1; i <= 3; i++) {
                const indicator = document.getElementById(`step${i}-indicator`);
                const line = document.getElementById(`line${i}`);
                
                if (i < currentStep) {
                    indicator.classList.add('completed');
                    indicator.classList.remove('active');
                    if (line) line.classList.add('completed');
                } else if (i === currentStep) {
                    indicator.classList.add('active');
                    indicator.classList.remove('completed');
                } else {
                    indicator.classList.remove('active', 'completed');
                    if (line) line.classList.remove('completed');
                }
            }
        }

        // Process payment
        async function processPayment() {
            if (!selectedPackage) {
                alert('Please select a package.');
                return;
            }
            
            nextStep(3);
            
            try {
                const customerData = {
                    contactPerson: document.getElementById('contact-person').value,
                    customerEmail: document.getElementById('customer-email').value,
                    organization: document.getElementById('organization').value,
                    phone: document.getElementById('phone').value,
                    sport: document.getElementById('sport').value
                };
                
                if (selectedProcessor === 'stripe') {
                    await processStripePayment(customerData);
                } else if (selectedProcessor === 'square') {
                    await processSquarePayment(customerData);
                }
                
            } catch (error) {
                console.error('Payment processing failed:', error);
                showError(error.message);
            }
        }

        // Process Stripe payment
        async function processStripePayment(customerData) {
            try {
                // Create payment intent or checkout session
                const response = await fetch('/api/payment-processor/create-checkout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        priceId: selectedPackage.stripePriceId,
                        mode: 'subscription',
                        tier: selectedPackage.id,
                        ...customerData
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Redirect to Stripe Checkout
                    window.location.href = result.url;
                } else {
                    throw new Error(result.error || 'Payment processing failed');
                }
                
            } catch (error) {
                console.error('Stripe payment failed:', error);
                showError(error.message);
            }
        }

        // Process Square payment
        async function processSquarePayment(customerData) {
            try {
                // Use the Square integration
                await blazeSquare.processSquarePayment();
            } catch (error) {
                console.error('Square payment failed:', error);
                showError(error.message);
            }
        }

        // Show success state
        function showSuccess() {
            document.getElementById('processing-state').classList.add('hidden');
            document.getElementById('success-state').classList.remove('hidden');
            document.getElementById('error-state').classList.add('hidden');
        }

        // Show error state
        function showError(message) {
            document.getElementById('processing-state').classList.add('hidden');
            document.getElementById('success-state').classList.add('hidden');
            document.getElementById('error-state').classList.remove('hidden');
            document.getElementById('error-message').textContent = message;
        }

        // Update order summary
        function updateOrderSummary() {
            const container = document.getElementById('order-summary');
            
            if (!selectedPackage) {
                container.innerHTML = '<p class="text-slate-400">Select a package to see pricing details.</p>';
                return;
            }
            
            const annualPrice = selectedPackage.annualPrice / 100;
            const monthlyEquivalent = selectedPackage.monthlyPrice / 100;
            const savings = (monthlyEquivalent * 12) - annualPrice;
            
            container.innerHTML = `
                <div class="space-y-4">
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="font-semibold text-white">${selectedPackage.name}</h4>
                            <p class="text-sm text-slate-400">${selectedPackage.description}</p>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold text-white">$${annualPrice.toLocaleString()}</div>
                            <div class="text-xs text-slate-400">Annual billing</div>
                        </div>
                    </div>
                    
                    <div class="pt-4 border-t border-slate-700">
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Monthly equivalent:</span>
                            <span class="text-slate-300">$${(annualPrice / 12).toLocaleString()}/mo</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">You save:</span>
                            <span class="text-green-400">$${savings.toLocaleString()}</span>
                        </div>
                    </div>
                    
                    <div class="pt-4 border-t border-slate-700">
                        <div class="flex justify-between items-center text-lg font-bold">
                            <span class="text-white">Total:</span>
                            <span class="text-white">$${annualPrice.toLocaleString()}</span>
                        </div>
                        <div class="text-xs text-slate-400 mt-1">14-day free trial included</div>
                    </div>
                </div>
            `;
        }

        // Handle URL parameters for direct package selection
        const urlParams = new URLSearchParams(window.location.search);
        const packageParam = urlParams.get('package');
        if (packageParam && packages[packageParam]) {
            // Will be handled in populatePackages()
        }
    </script>
</body>
</html>